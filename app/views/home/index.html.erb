<hr/>

<h1 class="text-center mt-4 mb-5 welcome-heading">Welcome to our BlogApp</h1>

<div class="d-flex justify-content-center mb-4 action-links">
  <%= link_to "New Post", new_post_path, class: "btn btn-dark me-5" %>
  <% if current_user %>
    <%= link_to "My Posts", posts_path, class: "btn btn-dark" %>
  <% end %>
</div>

<div class="container">
  <div class="row posts-container">
    <% @posts.each do |post| %>
      <div class="col-md-4">
        <div class="card post-card mb-4">
          <% if post.image.attached? %>
            <%= image_tag post.image, alt: post.title, class: "card-img-top post-image" %>
          <% end %>

          <div class="card-body">
            <h5 class="card-title post-title"><%= post.title %></h5>
            <p class="card-text post-description"><%= post.description.truncate(150) %></p>

            <h6 class="text-muted">Created by:</h6>
            <p class="post-author"><%= post.user.username %></p>
            
            <div class="comments-section">
              <h6>Comments:</h6>
              <% post.comments.limit(3).each do |comment| %>
                <div class="comment">
                  <p><strong><%= comment.user.email %>:</strong> <%= comment.content.truncate(100) %></p>
                </div>
              <% end %>
            </div>

            <%= link_to "Read more", post_path(post), class: "btn btn-outline-primary mt-3" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<!-- Optional: Add some inline CSS for styling -->
<style>
  .welcome-heading {
    color: #333;
  }

  .posts-container {
    margin-top: 20px;
  }

  .post-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    transition: box-shadow 0.3s ease-in-out;
  }

  .post-card:hover {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
  }

  .post-image {
    border-radius: 8px 8px 0 0;
  }

  .post-title {
    color: #333;
  }

  .post-description {
    color: #555;
  }

  .post-author {
    color: #777;
  }

  .comments-section {
    text-align: left;
  }

  .comment {
    border-bottom: 1px solid #eee;
    padding: 5px 0;
    margin-bottom: 5px;
  }
</style>
